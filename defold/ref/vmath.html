<html><head><link rel='stylesheet' type='text/css' href='../defold.css'></head><body><div class='nav'><a class='chevron' href='../index.html'><img src='../svg/chevron-left.svg' alt='Home'></a></div><h1>Vector math</h1>
<p><p>Functions for mathematical operations on vectors, matrices and quaternions.</p>
<ul>
<li>The vector types (<code>vmath.vector3</code> and <code>vmath.vector4</code>) supports addition and subtraction
  with vectors of the same type. Vectors can be negated and multiplied with numbers
  (scaled).</li>
<li>The quaternion type (<code>vmath.quat</code>) supports multiplication with other quaternions.</li>
<li>The matrix type (<code>vmath.matrix4</code>) can be multiplied with numbers, other matrices
  and <code>vmath.vector4</code> values.</li>
<li>All types performs equality comparison by each component value.</li>
</ul>
<p>The following components are available for the various types:</p>
<dl>
<dt>vector3</dt>
<dd><code>x</code>, <code>y</code> and <code>z</code>. Example: <code>v.y</code></dd>
<dt>vector4</dt>
<dd><code>x</code>, <code>y</code>, <code>z</code>, and <code>w</code>. Example: <code>v.w</code></dd>
<dt>quaternion</dt>
<dd><code>x</code>, <code>y</code>, <code>z</code>, and <code>w</code>. Example: <code>q.w</code></dd>
<dt>matrix4</dt>
<dd><code>m00</code> to <code>m33</code> where the first number is the row (starting from 0) and the second
number is the column. Columns can be accessed with <code>c0</code> to <code>c3</code>, returning a <code>vector4</code>.
Example: <code>m.m21</code> which is equal to <code>m.c1.z</code></dd>
<dt>vector</dt>
<dd>indexed by number 1 to the vector length. Example: <code>v[3]</code></dd>
</dl></p>
<h1><a name='//apple_ref/cpp/Function/vmath.conj' class='dashAnchor'></a><a class='entry' name='vmath.conj'>vmath.conj()</a></h1><div class='brief'><p>calculates the conjugate of a quaternion</p></div><p><p>Calculates the conjugate of a quaternion. The result is a
quaternion with the same magnitudes but with the sign of
the imaginary (vector) parts changed:</p>
<p><code>q<super>*</super> = [w, -v]</code></p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>q1<p><span class="type">quatertion</span> quaternion of which to calculate the conjugate</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quatertion</span> the conjugate</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">quat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">conj</span><span class="p">(</span><span class="n">quat</span><span class="p">))</span> <span class="c1">--&gt; vmath.quat(-1, -2, -3, 4)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.cross' class='dashAnchor'></a><a class='entry' name='vmath.cross'>vmath.cross()</a></h1><div class='brief'><p>calculates the cross-product of two vectors</p></div><p><p>Given two linearly independent vectors P and Q, the cross product,
P &#x00D7; Q, is a vector that is perpendicular to both P and Q and
therefore normal to the plane containing them.</p>
<p>If the two vectors have the same direction (or have the exact
opposite direction from one another, i.e. are not linearly independent)
or if either one has zero length, then their cross product is zero.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3</span> first vector</p></p><p class='param'>v2<p><span class="type">vector3</span> second vector</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3</span> a new vector representing the cross product</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vec2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">cross</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">vec2</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(0, 0, 1)</span>
<span class="kd">local</span> <span class="n">vec3</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">cross</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">vec3</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(0, -0, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.dot' class='dashAnchor'></a><a class='entry' name='vmath.dot'>vmath.dot()</a></h1><div class='brief'><p>calculates the dot-product of two vectors</p></div><p><p>The returned value is a scalar defined as:</p>
<p><code>P &#x22C5; Q = |P| |Q| cos &#x03B8;</code></p>
<p>where &#x03B8; is the angle between the vectors P and Q.</p>
<ul>
<li>If the dot product is positive then the angle between the vectors is below 90 degrees.</li>
<li>If the dot product is zero the vectors are perpendicular (at right-angles to each other).</li>
<li>If the dot product is negative then the angle between the vectors is more than 90 degrees.</li>
</ul></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3 | vector4</span> first vector</p></p><p class='param'>v2<p><span class="type">vector3 | vector4</span> second vector</p></p></div><h3>RETURN</h3><div class='return'><p>n - <p><span class="type">number</span> dot product</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">vmath</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vector1</span><span class="p">,</span> <span class="n">vector2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">then</span>
    <span class="c1">-- The two vectors are perpendicular (at right-angles to each other)</span>
    <span class="o">...</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.inv' class='dashAnchor'></a><a class='entry' name='vmath.inv'>vmath.inv()</a></h1><div class='brief'><p>calculates the inverse matrix.</p></div><p><p>The resulting matrix is the inverse of the supplied matrix.</p>
<p><span class="icon-attention"></span> For ortho-normal matrices, e.g. regular object transformation,
use <code>vmath.ortho_inv()</code> instead.
The specialized inverse for ortho-normalized matrices is much faster
than the general inverse.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>m1<p><span class="type">matrix4</span> matrix to invert</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> inverse of the supplied matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">mat1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">inv</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span>
<span class="c1">-- M * inv(M) = identity matrix</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat1</span> <span class="o">*</span> <span class="n">mat2</span><span class="p">)</span> <span class="c1">--&gt; vmath.matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.length' class='dashAnchor'></a><a class='entry' name='vmath.length'>vmath.length()</a></h1><div class='brief'><p>calculates the length of a vector or quaternion</p></div><p><p>Returns the length of the supplied vector or quaternion.</p>
<p>If you are comparing the lengths of vectors or quaternions, you should compare
the length squared instead as it is slightly more efficient to calculate
(it eliminates a square root calculation).</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v<p><span class="type">vector3 | vector4 | quat</span> value of which to calculate the length</p></p></div><h3>RETURN</h3><div class='return'><p>n - <p><span class="type">number</span> length</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">vmath</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">velocity</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">max_velocity</span> <span class="k">then</span>
    <span class="c1">-- The speed (velocity vector) is below max.</span>

    <span class="c1">-- TODO: max_velocity can be expressed as squared</span>
    <span class="c1">-- so we can compare with length_sqr() instead.</span>
    <span class="o">...</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.length_sqr' class='dashAnchor'></a><a class='entry' name='vmath.length_sqr'>vmath.length_sqr()</a></h1><div class='brief'><p>calculates the squared length of a vector or quaternion</p></div><p><p>Returns the squared length of the supplied vector or quaternion.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v<p><span class="type">vector3 | vector4 | quat</span> value of which to calculate the squared length</p></p></div><h3>RETURN</h3><div class='return'><p>n - <p><span class="type">number</span> squared length</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">vmath</span><span class="p">.</span><span class="n">length_sqr</span><span class="p">(</span><span class="n">vector1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">vmath</span><span class="p">.</span><span class="n">length_sqr</span><span class="p">(</span><span class="n">vector2</span><span class="p">)</span> <span class="k">then</span>
    <span class="c1">-- Vector 1 has less magnitude than vector 2</span>
    <span class="o">...</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.lerp' class='dashAnchor'></a><a class='entry' name='vmath.lerp'>vmath.lerp()</a></h1><div class='brief'><p>lerps between two vectors</p></div><p><p>Linearly interpolate between two vectors. The function
treats the vectors as positions and interpolates between
the positions in a straight line. Lerp is useful to describe
transitions from one place to another over time.</p>
<p><span class="icon-attention"></span> The function does not clamp t between 0 and 1.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>t<p><span class="type">number</span> interpolation parameter, 0-1</p></p><p class='param'>v1<p><span class="type">vector3 | vector4</span> vector to lerp from</p></p><p class='param'>v2<p><span class="type">vector3 | vector4</span> vector to lerp to</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3 | vector4</span> the lerped vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">+</span> <span class="n">dt</span>
    <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">startpos</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">endpos</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">endpos</span><span class="p">)</span>
        <span class="n">go</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">go&quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.lerp' class='dashAnchor'></a><a class='entry' name='vmath.lerp'>vmath.lerp()</a></h1><div class='brief'><p>lerps between two quaternions</p></div><p><p>Linearly interpolate between two quaternions. Linear
interpolation of rotations are only useful for small
rotations. For interpolations of arbitrary rotations,
<a href="http://www.defold.com/ref/vmath#vmath.slerp">vmath.slerp</a> yields much better results.</p>
<p><span class="icon-attention"></span> The function does not clamp t between 0 and 1.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>t<p><span class="type">number</span> interpolation parameter, 0-1</p></p><p class='param'>q1<p><span class="type">quaternion</span> quaternion to lerp from</p></p><p class='param'>q2<p><span class="type">quaternion</span> quaternion to lerp to</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> the lerped quaternion</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">+</span> <span class="n">dt</span>
    <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">startrot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">endrot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">startrot</span><span class="p">,</span> <span class="n">endrot</span><span class="p">)</span>
        <span class="n">go</span><span class="p">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">go&quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.lerp' class='dashAnchor'></a><a class='entry' name='vmath.lerp'>vmath.lerp()</a></h1><div class='brief'><p>lerps between two numbers</p></div><p><p>Linearly interpolate between two values. Lerp is useful
to describe transitions from one value to another over time.</p>
<p><span class="icon-attention"></span> The function does not clamp t between 0 and 1.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>t<p><span class="type">number</span> interpolation parameter, 0-1</p></p><p class='param'>n1<p><span class="type">number</span> number to lerp from</p></p><p class='param'>n2<p><span class="type">number</span> number to lerp to</p></p></div><h3>RETURN</h3><div class='return'><p>n - <p><span class="type">number</span> the lerped number</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">+</span> <span class="n">dt</span>
    <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">startx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="kd">local</span> <span class="n">endx</span> <span class="o">=</span> <span class="mi">600</span>
        <span class="kd">local</span> <span class="n">x</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">startx</span><span class="p">,</span> <span class="n">endx</span><span class="p">)</span>
        <span class="n">go</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;</span><span class="s">go&quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4' class='dashAnchor'></a><a class='entry' name='vmath.matrix4'>vmath.matrix4()</a></h1><div class='brief'><p>creates a new identity matrix</p></div><p><p>The resulting identity matrix describes a transform with
no translation or rotation.</p></p><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> identity matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">mat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span> <span class="c1">--&gt; vmath.matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)</span>
<span class="c1">-- get column 0:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span><span class="p">.</span><span class="n">c0</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(1, 0, 0, 0)</span>
<span class="c1">-- get the value in row 3 and column 2:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span><span class="p">.</span><span class="n">m32</span><span class="p">)</span> <span class="c1">--&gt; 0</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4' class='dashAnchor'></a><a class='entry' name='vmath.matrix4'>vmath.matrix4()</a></h1><div class='brief'><p>creates a new matrix from another existing matrix</p></div><p><p>Creates a new matrix with all components set to the
corresponding values from the supplied matrix. I.e.
the function creates a copy of the given matrix.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>m1<p><span class="type">matrix4</span> existing matrix</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix which is a copy of the specified matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">mat1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_rotation_x</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">mat1</span> <span class="o">==</span> <span class="n">mat2</span> <span class="k">then</span>
    <span class="c1">-- yes, they are equal</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mat2</span><span class="p">)</span> <span class="c1">--&gt; vmath.matrix4(1, 0, 0, 0, 0, -1, 8.7422776573476e-08, 0, 0, -8.7422776573476e-08, -1, 0, 0, 0, 0, 1)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_axis_angle' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_axis_angle'>vmath.matrix4_axis_angle()</a></h1><div class='brief'><p>creates a matrix from an axis and an angle</p></div><p><p>The resulting matrix describes a rotation around the axis by the specified angle.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v<p><span class="type">vector3</span> axis</p></p><p class='param'>angle<p><span class="type">number</span> angle in radians</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix represented by axis and angle</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">-- z-axis</span>
<span class="kd">local</span> <span class="n">mat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_axis_angle</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="mf">3.141592653</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span> <span class="o">*</span> <span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(-0.99999994039536, -1.0000001192093, 0, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_from_quat' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_from_quat'>vmath.matrix4_from_quat()</a></h1><div class='brief'><p>creates a matrix from a quaternion</p></div><p><p>The resulting matrix describes the same rotation as the quaternion, but does not have any translation (also like the quaternion).</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>q<p><span class="type">quaternion</span> quaternion to create matrix from</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix represented by quaternion</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">quat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_from_quat</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span> <span class="o">*</span> <span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.matrix4_frustum(-1, 1, -1, 1, 1, 1000)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_frustum' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_frustum'>vmath.matrix4_frustum()</a></h1><div class='brief'><p>creates a frustum matrix</p></div><p><p>Constructs a frustum matrix from the given values. The left, right,
top and bottom coordinates of the view cone are expressed as distances
from the center of the near clipping plane. The near and far coordinates
are expressed as distances from the tip of the view frustum cone.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>left<p><span class="type">number</span> coordinate for left clipping plane</p></p><p class='param'>right<p><span class="type">number</span> coordinate for right clipping plane</p></p><p class='param'>bottom<p><span class="type">number</span> coordinate for bottom clipping plane</p></p><p class='param'>top<p><span class="type">number</span> coordinate for top clipping plane</p></p><p class='param'>near<p><span class="type">number</span> coordinate for near clipping plane</p></p><p class='param'>far<p><span class="type">number</span> coordinate for far clipping plane</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix representing the frustum</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Construct a projection frustum with a vertical and horizontal</span>
<span class="c1">-- FOV of 45 degrees. Useful for rendering a square view.</span>
<span class="kd">local</span> <span class="n">proj</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_frustum</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">render</span><span class="p">.</span><span class="n">set_projection</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_look_at' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_look_at'>vmath.matrix4_look_at()</a></h1><div class='brief'><p>creates a look-at view matrix</p></div><p><p>The resulting matrix is created from the supplied look-at parameters.
This is useful for constructing a view matrix for a camera or
rendering in general.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>eye<p><span class="type">vector3</span> eye position</p></p><p class='param'>look_at<p><span class="type">vector3</span> look-at position</p></p><p class='param'>up<p><span class="type">vector3</span> up vector</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> look-at matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Set up a perspective camera at z 100 with 45 degrees (pi/2) FOV</span>
<span class="c1">-- Aspect ratio 4:3</span>
<span class="kd">local</span> <span class="n">eye</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">look_at</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">up</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">view</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_look_at</span><span class="p">(</span><span class="n">eye</span><span class="p">,</span> <span class="n">look_at</span><span class="p">,</span> <span class="n">up</span><span class="p">)</span>
<span class="n">render</span><span class="p">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">proj</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_perspective</span><span class="p">(</span><span class="mf">3.141592</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">render</span><span class="p">.</span><span class="n">set_projection</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_orthographic' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_orthographic'>vmath.matrix4_orthographic()</a></h1><div class='brief'><p>creates an orthographic projection matrix</p></div><p><p>Creates an orthographic projection matrix.
This is useful to construct a projection matrix for a camera or rendering in general.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>left<p><span class="type">number</span> coordinate for left clipping plane</p></p><p class='param'>right<p><span class="type">number</span> coordinate for right clipping plane</p></p><p class='param'>bottom<p><span class="type">number</span> coordinate for bottom clipping plane</p></p><p class='param'>top<p><span class="type">number</span> coordinate for top clipping plane</p></p><p class='param'>near<p><span class="type">number</span> coordinate for near clipping plane</p></p><p class='param'>far<p><span class="type">number</span> coordinate for far clipping plane</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> orthographic projection matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Set up an orthographic projection based on the width and height</span>
<span class="c1">-- of the game window.</span>
<span class="kd">local</span> <span class="n">w</span> <span class="o">=</span> <span class="n">render</span><span class="p">.</span><span class="n">get_width</span><span class="p">()</span>
<span class="kd">local</span> <span class="n">h</span> <span class="o">=</span> <span class="n">render</span><span class="p">.</span><span class="n">get_height</span><span class="p">()</span>
<span class="kd">local</span> <span class="n">proj</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_orthographic</span><span class="p">(</span><span class="o">-</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">render</span><span class="p">.</span><span class="n">set_projection</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_perspective' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_perspective'>vmath.matrix4_perspective()</a></h1><div class='brief'><p>creates a perspective projection matrix</p></div><p><p>Creates a perspective projection matrix.
This is useful to construct a projection matrix for a camera or rendering in general.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>fov<p><span class="type">number</span> angle of the full vertical field of view in radians</p></p><p class='param'>aspect<p><span class="type">number</span> aspect ratio</p></p><p class='param'>near<p><span class="type">number</span> coordinate for near clipping plane</p></p><p class='param'>far<p><span class="type">number</span> coordinate for far clipping plane</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> perspective projection matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Set up a perspective camera at z 100 with 45 degrees (pi/2) FOV</span>
<span class="c1">-- Aspect ratio 4:3</span>
<span class="kd">local</span> <span class="n">eye</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">look_at</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">up</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">view</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_look_at</span><span class="p">(</span><span class="n">eye</span><span class="p">,</span> <span class="n">look_at</span><span class="p">,</span> <span class="n">up</span><span class="p">)</span>
<span class="n">render</span><span class="p">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">proj</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_perspective</span><span class="p">(</span><span class="mf">3.141592</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">render</span><span class="p">.</span><span class="n">set_projection</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_rotation_x' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_rotation_x'>vmath.matrix4_rotation_x()</a></h1><div class='brief'><p>creates a matrix from rotation around x-axis</p></div><p><p>The resulting matrix describes a rotation around the x-axis
by the specified angle.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>angle<p><span class="type">number</span> angle in radians around x-axis</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix from rotation around x-axis</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_rotation_x</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span> <span class="o">*</span> <span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(1, -1, -8.7422776573476e-08, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_rotation_y' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_rotation_y'>vmath.matrix4_rotation_y()</a></h1><div class='brief'><p>creates a matrix from rotation around y-axis</p></div><p><p>The resulting matrix describes a rotation around the y-axis
by the specified angle.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>angle<p><span class="type">number</span> angle in radians around y-axis</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix from rotation around y-axis</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_rotation_y</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span> <span class="o">*</span> <span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(-1, 1, 8.7422776573476e-08, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.matrix4_rotation_z' class='dashAnchor'></a><a class='entry' name='vmath.matrix4_rotation_z'>vmath.matrix4_rotation_z()</a></h1><div class='brief'><p>creates a matrix from rotation around z-axis</p></div><p><p>The resulting matrix describes a rotation around the z-axis
by the specified angle.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>angle<p><span class="type">number</span> angle in radians around z-axis</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> matrix from rotation around z-axis</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span> <span class="o">*</span> <span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(-0.99999994039536, -1.0000001192093, 0, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.mul_per_elem' class='dashAnchor'></a><a class='entry' name='vmath.mul_per_elem'>vmath.mul_per_elem()</a></h1><div class='brief'><p>performs an element wise multiplication of two vectors</p></div><p><p>Performs an element wise multiplication between two vectors of the same type
The returned value is a vector defined as (e.g. for a vector3):</p>
<p><code>v = vmath.mul_per_elem(a, b) = vmath.vector3(a.x * b.x, a.y * b.y, a.z * b.z)</code></p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3 | vector4</span> first vector</p></p><p class='param'>v2<p><span class="type">vector3 | vector4</span> second vector</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3 | vector4</span> multiplied vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">blend_color</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">mul_per_elem</span><span class="p">(</span><span class="n">color1</span><span class="p">,</span> <span class="n">color2</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.normalize' class='dashAnchor'></a><a class='entry' name='vmath.normalize'>vmath.normalize()</a></h1><div class='brief'><p>normalizes a vector</p></div><p><p>Normalizes a vector, i.e. returns a new vector with the same
direction as the input vector, but with length 1.</p>
<p><span class="icon-attention"></span> The length of the vector must be above 0, otherwise a
division-by-zero will occur.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3 | vector4 | quat</span> vector to normalize</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3 | vector4 | quat</span> new normalized vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">norm_vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">norm_vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(0.26726123690605, 0.5345224738121, 0.80178368091583)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="n">norm_vec</span><span class="p">))</span> <span class="c1">--&gt; 0.99999994039536</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.ortho_inv' class='dashAnchor'></a><a class='entry' name='vmath.ortho_inv'>vmath.ortho_inv()</a></h1><div class='brief'><p>calculates the inverse of an ortho-normal matrix.</p></div><p><p>The resulting matrix is the inverse of the supplied matrix.
The supplied matrix has to be an ortho-normal matrix, e.g.
describe a regular object transformation.</p>
<p><span class="icon-attention"></span> For matrices that are not ortho-normal
use the general inverse <code>vmath.inv()</code> instead.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>m1<p><span class="type">matrix4</span> ortho-normalized matrix to invert</p></p></div><h3>RETURN</h3><div class='return'><p>m - <p><span class="type">matrix4</span> inverse of the supplied matrix</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">mat1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">matrix4_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">mat2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">ortho_inv</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span>
<span class="c1">-- M * inv(M) = identity matrix</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat1</span> <span class="o">*</span> <span class="n">mat2</span><span class="p">)</span> <span class="c1">--&gt; vmath.matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.project' class='dashAnchor'></a><a class='entry' name='vmath.project'>vmath.project()</a></h1><div class='brief'><p>projects a vector onto another vector</p></div><p><p>Calculates the extent the projection of the first vector onto the second.
The returned value is a scalar p defined as:</p>
<p><code>p = |P| cos &#x03B8; / |Q|</code></p>
<p>where &#x03B8; is the angle between the vectors P and Q.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3</span> vector to be projected on the second</p></p><p class='param'>v2<p><span class="type">vector3</span> vector onto which the first will be projected, must not have zero length</p></p></div><h3>RETURN</h3><div class='return'><p>n - <p><span class="type">number</span> the projected extent of the first vector onto the second</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">v2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">project</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">))</span> <span class="c1">--&gt; 0.5</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat' class='dashAnchor'></a><a class='entry' name='vmath.quat'>vmath.quat()</a></h1><div class='brief'><p>creates a new identity quaternion</p></div><p><p>Creates a new identity quaternion. The identity
quaternion is equal to:</p>
<p><code>vmath.quat(0, 0, 0, 1)</code></p></p><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> new identity quaternion</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">quat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span> <span class="c1">--&gt; vmath.quat(0, 0, 0, 1)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">quat</span><span class="p">.</span><span class="n">w</span><span class="p">)</span> <span class="c1">--&gt; 1</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat' class='dashAnchor'></a><a class='entry' name='vmath.quat'>vmath.quat()</a></h1><div class='brief'><p>creates a new quaternion from another existing quaternion</p></div><p><p>Creates a new quaternion with all components set to the
corresponding values from the supplied quaternion. I.e.
This function creates a copy of the given quaternion.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>q1<p><span class="type">quaternion</span> existing quaternion</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> new quaternion</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">quat1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">quat2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat</span><span class="p">(</span><span class="n">quat1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">quat1</span> <span class="o">==</span> <span class="n">quat2</span> <span class="k">then</span>
    <span class="c1">-- yes, they are equal</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">quat2</span><span class="p">)</span> <span class="c1">--&gt; vmath.quat(1, 2, 3, 4)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat' class='dashAnchor'></a><a class='entry' name='vmath.quat'>vmath.quat()</a></h1><div class='brief'><p>creates a new quaternion from its coordinates</p></div><p><p>Creates a new quaternion with the components set
according to the supplied parameter values.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>x<p><span class="type">number</span> x coordinate</p></p><p class='param'>y<p><span class="type">number</span> y coordinate</p></p><p class='param'>z<p><span class="type">number</span> z coordinate</p></p><p class='param'>w<p><span class="type">number</span> w coordinate</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> new quaternion</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">quat</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span> <span class="c1">--&gt; vmath.quat(1, 2, 3, 4)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat_axis_angle' class='dashAnchor'></a><a class='entry' name='vmath.quat_axis_angle'>vmath.quat_axis_angle()</a></h1><div class='brief'><p>creates a quaternion to rotate around a unit vector</p></div><p><p>The resulting quaternion describes a rotation of <code>angle</code>
radians around the axis described by the unit vector <code>v</code>.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v<p><span class="type">vector3</span> axis</p></p><p class='param'>angle<p><span class="type">number</span> angle</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> quaternion representing the axis-angle rotation</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_axis_angle</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="n">vec</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(1, -1, -8.7422776573476e-08)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat_basis' class='dashAnchor'></a><a class='entry' name='vmath.quat_basis'>vmath.quat_basis()</a></h1><div class='brief'><p>creates a quaternion from three base unit vectors</p></div><p><p>The resulting quaternion describes the rotation from the
identity quaternion (no rotation) to the coordinate system
as described by the given x, y and z base unit vectors.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>x<p><span class="type">vector3</span> x base vector</p></p><p class='param'>y<p><span class="type">vector3</span> y base vector</p></p><p class='param'>z<p><span class="type">vector3</span> z base vector</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> quaternion representing the rotation of the specified base vectors</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Axis rotated 90 degrees around z.</span>
<span class="kd">local</span> <span class="n">rot_x</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rot_y</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">z</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rot1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_basis</span><span class="p">(</span><span class="n">rot_x</span><span class="p">,</span> <span class="n">rot_y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rot2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_from_to</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">if</span> <span class="n">rot1</span> <span class="o">==</span> <span class="n">rot2</span> <span class="k">then</span>
    <span class="c1">-- These quaternions are equal!</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">rot2</span><span class="p">)</span> <span class="c1">--&gt; vmath.quat(0, 0, -0.70710676908493, 0.70710676908493)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat_from_to' class='dashAnchor'></a><a class='entry' name='vmath.quat_from_to'>vmath.quat_from_to()</a></h1><div class='brief'><p>creates a quaternion to rotate between two unit vectors</p></div><p><p>The resulting quaternion describes the rotation that,
if applied to the first vector, would rotate the first
vector to the second. The two vectors must be unit
vectors (of length 1).</p>
<p><span class="icon-attention"></span> The result is undefined if the two vectors point in opposite directions</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3</span> first unit vector, before rotation</p></p><p class='param'>v2<p><span class="type">vector3</span> second unit vector, after rotation</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> quaternion representing the rotation from first to second vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">v2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_from_to</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="n">v1</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(0, 0.99999994039536, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat_rotation_x' class='dashAnchor'></a><a class='entry' name='vmath.quat_rotation_x'>vmath.quat_rotation_x()</a></h1><div class='brief'><p>creates a quaternion from rotation around x-axis</p></div><p><p>The resulting quaternion describes a rotation of <code>angle</code>
radians around the x-axis.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>angle<p><span class="type">number</span> angle in radians around x-axis</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> quaternion representing the rotation around the x-axis</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_x</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="n">vec</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(1, -1, -8.7422776573476e-08)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat_rotation_y' class='dashAnchor'></a><a class='entry' name='vmath.quat_rotation_y'>vmath.quat_rotation_y()</a></h1><div class='brief'><p>creates a quaternion from rotation around y-axis</p></div><p><p>The resulting quaternion describes a rotation of <code>angle</code>
radians around the y-axis.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>angle<p><span class="type">number</span> angle in radians around y-axis</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> quaternion representing the rotation around the y-axis</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_y</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="n">vec</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(-1, 1, 8.7422776573476e-08)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.quat_rotation_z' class='dashAnchor'></a><a class='entry' name='vmath.quat_rotation_z'>vmath.quat_rotation_z()</a></h1><div class='brief'><p>creates a quaternion from rotation around z-axis</p></div><p><p>The resulting quaternion describes a rotation of <code>angle</code>
radians around the z-axis.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>angle<p><span class="type">number</span> angle in radians around z-axis</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> quaternion representing the rotation around the z-axis</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="n">vec</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(-0.99999988079071, -1, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.rotate' class='dashAnchor'></a><a class='entry' name='vmath.rotate'>vmath.rotate()</a></h1><div class='brief'><p>rotates a vector by a quaternion</p></div><p><p>Returns a new vector from the supplied vector that is
rotated by the rotation described by the supplied
quaternion.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>q<p><span class="type">quatertion</span> quaternion</p></p><p class='param'>v1<p><span class="type">vector3</span> vector to rotate</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3</span> the rotated vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mf">3.141592563</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vmath</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="n">vec</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(-1.0000002384186, -0.99999988079071, 0)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.slerp' class='dashAnchor'></a><a class='entry' name='vmath.slerp'>vmath.slerp()</a></h1><div class='brief'><p>slerps between two vectors</p></div><p><p>Spherically interpolates between two vectors. The difference to
lerp is that slerp treats the vectors as directions instead of
positions in space.</p>
<p>The direction of the returned vector is interpolated by the angle
and the magnitude is interpolated between the magnitudes of the
from and to vectors.</p>
<p><span class="icon-attention"></span> Slerp is computationally more expensive than lerp.
The function does not clamp t between 0 and 1.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>t<p><span class="type">number</span> interpolation parameter, 0-1</p></p><p class='param'>v1<p><span class="type">vector3 | vector4</span> vector to slerp from</p></p><p class='param'>v2<p><span class="type">vector3 | vector4</span> vector to slerp to</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3 | vector4</span> the slerped vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">+</span> <span class="n">dt</span>
    <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">startpos</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">endpos</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">slerp</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">endpos</span><span class="p">)</span>
        <span class="n">go</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">go&quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.slerp' class='dashAnchor'></a><a class='entry' name='vmath.slerp'>vmath.slerp()</a></h1><div class='brief'><p>slerps between two quaternions</p></div><p><p>Slerp travels the torque-minimal path maintaining constant
velocity, which means it travels along the straightest path along
the rounded surface of a sphere. Slerp is useful for interpolation
of rotations.</p>
<p>Slerp travels the torque-minimal path, which means it travels
along the straightest path the rounded surface of a sphere.</p>
<p><span class="icon-attention"></span> The function does not clamp t between 0 and 1.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>t<p><span class="type">number</span> interpolation parameter, 0-1</p></p><p class='param'>q1<p><span class="type">quaternion</span> quaternion to slerp from</p></p><p class='param'>q2<p><span class="type">quaternion</span> quaternion to slerp to</p></p></div><h3>RETURN</h3><div class='return'><p>q - <p><span class="type">quaternion</span> the slerped quaternion</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">+</span> <span class="n">dt</span>
    <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">startrot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">endrot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">quat_rotation_z</span><span class="p">(</span><span class="mf">3.141592653</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">rot</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">slerp</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">startrot</span><span class="p">,</span> <span class="n">endrot</span><span class="p">)</span>
        <span class="n">go</span><span class="p">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">go&quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector' class='dashAnchor'></a><a class='entry' name='vmath.vector'>vmath.vector()</a></h1><div class='brief'><p>create a new vector from a table of values</p></div><p><p>Creates a vector of arbitrary size. The vector is initialized
with numeric values from a table.</p>
<p><span class="icon-attention"></span> The table values are converted to floating point
values. If a value cannot be converted, a 0 is stored in that
value position in the vector.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>t<p><span class="type">table</span> table of numbers</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><p>How to create a vector with custom data to be used for animation easing:</p>
<div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">values</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector (size: 3)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1">--&gt; 0.5</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector3' class='dashAnchor'></a><a class='entry' name='vmath.vector3'>vmath.vector3()</a></h1><div class='brief'><p>creates a new zero vector</p></div><p><p>Creates a new zero vector with all components set to 0.</p></p><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3</span> new zero vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">()</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(0, 0, 0)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="c1">--&gt; 0</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector3' class='dashAnchor'></a><a class='entry' name='vmath.vector3'>vmath.vector3()</a></h1><div class='brief'><p>creates a new vector from scalar value</p></div><p><p>Creates a new vector with all components set to the
supplied scalar value.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>n<p><span class="type">number</span> scalar value to splat</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(1, 1, 1)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="c1">--&gt; 1</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector3' class='dashAnchor'></a><a class='entry' name='vmath.vector3'>vmath.vector3()</a></h1><div class='brief'><p>creates a new vector from another existing vector</p></div><p><p>Creates a new vector with all components set to the
corresponding values from the supplied vector. I.e.
This function creates a copy of the given vector.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector3</span> existing vector</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vec2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="n">vec1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">vec1</span> <span class="o">==</span> <span class="n">vec2</span> <span class="k">then</span>
    <span class="c1">-- yes, they are equal</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">vec2</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(1, 1, 1)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector3' class='dashAnchor'></a><a class='entry' name='vmath.vector3'>vmath.vector3()</a></h1><div class='brief'><p>creates a new vector from its coordinates</p></div><p><p>Creates a new vector with the components set to the
supplied values.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>x<p><span class="type">number</span> x coordinate</p></p><p class='param'>y<p><span class="type">number</span> y coordinate</p></p><p class='param'>z<p><span class="type">number</span> z coordinate</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector3</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(1, 2, 3)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">-</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(-1, -2, -3)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector3(2, 4, 6)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span> <span class="o">+</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(3, 4, 5)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span> <span class="o">-</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector3(-1, 0, 1)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector4' class='dashAnchor'></a><a class='entry' name='vmath.vector4'>vmath.vector4()</a></h1><div class='brief'><p>creates a new zero vector</p></div><p><p>Creates a new zero vector with all components set to 0.</p></p><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector4</span> new zero vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(0, 0, 0, 0)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">w</span><span class="p">)</span> <span class="c1">--&gt; 0</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector4' class='dashAnchor'></a><a class='entry' name='vmath.vector4'>vmath.vector4()</a></h1><div class='brief'><p>creates a new vector from scalar value</p></div><p><p>Creates a new vector with all components set to the
supplied scalar value.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>n<p><span class="type">number</span> scalar value to splat</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector4</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(1, 1, 1, 1)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">w</span><span class="p">)</span> <span class="c1">--&gt; 1</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector4' class='dashAnchor'></a><a class='entry' name='vmath.vector4'>vmath.vector4()</a></h1><div class='brief'><p>creates a new vector from another existing vector</p></div><p><p>Creates a new vector with all components set to the
corresponding values from the supplied vector. I.e.
This function creates a copy of the given vector.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>v1<p><span class="type">vector4</span> existing vector</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector4</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vect1</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">vect2</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="n">vec1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">vec1</span> <span class="o">==</span> <span class="n">vec2</span> <span class="k">then</span>
    <span class="c1">-- yes, they are equal</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">vec2</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(1, 1, 1, 1)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/vmath.vector4' class='dashAnchor'></a><a class='entry' name='vmath.vector4'>vmath.vector4()</a></h1><div class='brief'><p>creates a new vector from its coordinates</p></div><p><p>Creates a new vector with the components set to the
supplied values.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>x<p><span class="type">number</span> x coordinate</p></p><p class='param'>y<p><span class="type">number</span> y coordinate</p></p><p class='param'>z<p><span class="type">number</span> z coordinate</p></p><p class='param'>w<p><span class="type">number</span> w coordinate</p></p></div><h3>RETURN</h3><div class='return'><p>v - <p><span class="type">vector4</span> new vector</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(1, 2, 3, 4)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">-</span><span class="n">vec</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(-1, -2, -3, -4)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">--&gt; vmath.vector4(2, 4, 6, 8)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span> <span class="o">+</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector4(3, 4, 5, 6)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vec</span> <span class="o">-</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span> <span class="c1">--&gt; vmath.vector4(-1, 0, 1, 2)</span>
</pre></div></p></div><hr/></body></html>