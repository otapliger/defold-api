<html><head><link rel='stylesheet' type='text/css' href='../defold.css'></head><body><div class='nav'><a class='chevron' href='../index.html'><img src='../svg/chevron-left.svg' alt='Home'></a></div><h1>Tilemap</h1>
<p><p>Functions and messages used to manipulate tile map components.</p></p>
<h1><a name='//apple_ref/cpp/Property/material' class='dashAnchor'></a><a class='entry' name='material'>material</a></h1><div class='brief'><p><span class="type">hash</span> tile map material</p></div><p><p>The material used when rendering the tile map. The type of the property is hash.</p></p><h3>EXAMPLES</h3><div class='examples'><p><p>How to set material using a script property (see <a href="http://www.defold.com/ref/resource#resource.material">resource.material</a>)</p>
<div class="codehilite"><pre><span></span><span class="n">go</span><span class="p">.</span><span class="n">property</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">my_material&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">.</span><span class="n">material</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">/material.material&quot;</span><span class="p">))</span>
<span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
  <span class="n">go</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">material&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">my_material</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Property/tile_source' class='dashAnchor'></a><a class='entry' name='tile_source'>tile_source</a></h1><div class='brief'><p><span class="type">hash</span> tile source</p></div><p><p>The tile source used when rendering the tile map. The type of the property is hash.</p></p><h3>EXAMPLES</h3><div class='examples'><p><p>How to set tile source using a script property (see <a href="http://www.defold.com/ref/resource#resource.tile_source">resource.tile_source</a>)</p>
<div class="codehilite"><pre><span></span><span class="n">go</span><span class="p">.</span><span class="n">property</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">my_tile_source&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">.</span><span class="n">tile_source</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">/tilesource.tilesource&quot;</span><span class="p">))</span>
<span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
  <span class="n">go</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">tile_source&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">my_tile_source</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/tilemap.get_bounds' class='dashAnchor'></a><a class='entry' name='tilemap.get_bounds'>tilemap.get_bounds()</a></h1><div class='brief'><p>get the bounds of a tile map</p></div><p><p>Get the bounds for a tile map. This function returns multiple values:
The lower left corner index x and y coordinates (1-indexed),
the tile map width and the tile map height.</p>
<p>The resulting values take all tile map layers into account, meaning that
the bounds are calculated as if all layers were collapsed into one.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>url<p><span class="type">string | hash | url</span> the tile map</p></p></div><h3>RETURN</h3><div class='return'><p>x - <p><span class="type">number</span> x coordinate of the bottom left corner</p></p><p>y - <p><span class="type">number</span> y coordinate of the bottom left corner</p></p><p>w - <p><span class="type">number</span> number of columns (width) in the tile map</p></p><p>h - <p><span class="type">number</span> number of rows (height) in the tile map</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- get the level bounds.</span>
<span class="kd">local</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">tilemap</span><span class="p">.</span><span class="n">get_bounds</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">/level#tilemap&quot;</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/tilemap.get_tile' class='dashAnchor'></a><a class='entry' name='tilemap.get_tile'>tilemap.get_tile()</a></h1><div class='brief'><p>get a tile from a tile map</p></div><p><p>Get the tile set at the specified position in the tilemap.
The position is identified by the tile index starting at origo
with index 1, 1. (see <a href="http://www.defold.com/ref/tilemap#tilemap.set_tile()">tilemap.set_tile()</a>)
Which tile map and layer to query is identified by the URL and the
layer name parameters.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>url<p><span class="type">string | hash | url</span> the tile map</p></p><p class='param'>layer<p><span class="type">string | hash</span> name of the layer for the tile</p></p><p class='param'>x<p><span class="type">number</span> x-coordinate of the tile</p></p><p class='param'>y<p><span class="type">number</span> y-coordinate of the tile</p></p></div><h3>RETURN</h3><div class='return'><p>tile - <p><span class="type">number</span> index of the tile</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- get the tile under the player.</span>
<span class="kd">local</span> <span class="n">tileno</span> <span class="o">=</span> <span class="n">tilemap</span><span class="p">.</span><span class="n">get_tile</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">/level#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">foreground&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">player_x</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">player_y</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/tilemap.reset_constant' class='dashAnchor'></a><a class='entry' name='tilemap.reset_constant'>tilemap.reset_constant()</a></h1><div class='brief'><p>reset a shader constant for a tile map</p></div><p><p>Resets a shader constant for a tile map component.
The constant must be defined in the material assigned to the tile map.
Resetting a constant through this function implies that the value defined in the material will be used.
Which tile map to reset a constant for is identified by the URL.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>url<p><span class="type">string | hash | url</span> the tile map that should have a constant reset</p></p><p class='param'>constant<p><span class="type">string | hash</span> name of the constant</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><p>The following examples assumes that the tile map has id "tilemap" and that the default-material in builtins is used, which defines the constant "tint".
If you assign a custom material to the tile map, you can reset the constants defined there in the same manner.</p>
<p>How to reset the tinting of a tile map:</p>
<div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">tilemap</span><span class="p">.</span><span class="n">reset_constant</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">tint&quot;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/tilemap.set_constant' class='dashAnchor'></a><a class='entry' name='tilemap.set_constant'>tilemap.set_constant()</a></h1><div class='brief'><p>set a shader constant for a tile map</p></div><p><p>Sets a shader constant for a tile map component.
The constant must be defined in the material assigned to the tile map.
Setting a constant through this function will override the value set for that constant in the material.
The value will be overridden until tilemap.reset_constant is called.
Which tile map to set a constant for is identified by the URL.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>url<p><span class="type">string | hash | url</span> the tile map that should have a constant set</p></p><p class='param'>constant<p><span class="type">string | hash</span> name of the constant</p></p><p class='param'>value<p><span class="type">vector4</span> value of the constant</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><p>The following examples assumes that the tile map has id "tile map" and that the default-material in builtins is used, which defines the constant "tint".
If you assign a custom material to the tile map, you can set the constants defined there in the same manner.</p>
<p>How to tint a tile map to red:</p>
<div class="codehilite"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="n">tilemap</span><span class="p">.</span><span class="n">set_constant</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">tint&quot;</span><span class="p">,</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">end</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/tilemap.set_tile' class='dashAnchor'></a><a class='entry' name='tilemap.set_tile'>tilemap.set_tile()</a></h1><div class='brief'><p>set a tile in a tile map</p></div><p><p>Replace a tile in a tile map with a new tile.
The coordinates of the tiles are indexed so that the "first" tile just
above and to the right of origo has coordinates 1,1.
Tiles to the left of and below origo are indexed 0, -1, -2 and so forth.</p>
<pre>
+-------+-------+------+------+
|  0,3  |  1,3  | 2,3  | 3,3  |
+-------+-------+------+------+
|  0,2  |  1,2  | 2,2  | 3,2  |
+-------+-------+------+------+
|  0,1  |  1,1  | 2,1  | 3,1  |
+-------O-------+------+------+
|  0,0  |  1,0  | 2,0  | 3,0  |
+-------+-------+------+------+
</pre>

<p>The coordinates must be within the bounds of the tile map as it were created.
That is, it is not possible to extend the size of a tile map by setting tiles outside the edges.
To clear a tile, set the tile to number 0. Which tile map and layer to manipulate is identified by the URL and the layer name parameters.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>url<p><span class="type">string | hash | url</span> the tile map</p></p><p class='param'>layer<p><span class="type">string | hash</span> name of the layer for the tile</p></p><p class='param'>x<p><span class="type">number</span> x-coordinate of the tile</p></p><p class='param'>y<p><span class="type">number</span> y-coordinate of the tile</p></p><p class='param'>tile<p><span class="type">number</span> index of new tile to set</p></p><p class='param'>[h-flipped]<p><span class="type">boolean</span> optional if the tile should be horizontally flipped</p></p><p class='param'>[v-flipped]<p><span class="type">boolean</span> optional i the tile should be vertically flipped</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Clear the tile under the player.</span>
<span class="n">tilemap</span><span class="p">.</span><span class="n">set_tile</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">/level#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">foreground&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">player_x</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">player_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/tilemap.set_visible' class='dashAnchor'></a><a class='entry' name='tilemap.set_visible'>tilemap.set_visible()</a></h1><div class='brief'><p>set the visibility of a layer</p></div><p><p>Sets the visibility of the tilemap layer</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>url<p><span class="type">string | hash | url</span> the tile map</p></p><p class='param'>layer<p><span class="type">string | hash</span> name of the layer for the tile</p></p><p class='param'>visible<p><span class="type">boolean</span> should the layer be visible</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">-- Disable rendering of the layer</span>
<span class="n">tilemap</span><span class="p">.</span><span class="n">set_visible</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">/level#tilemap&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">foreground&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</pre></div></p></div><hr/></body></html>