<html><head><link rel='stylesheet' type='text/css' href='../defold.css'></head><body><div class='nav'><a class='chevron' href='../index.html'><img src='../svg/chevron-left.svg' alt='Home'></a></div><h1>Extension</h1>
<p><p><span class="file">&lt;dmsdk/extension/extension.h&gt;</span></p>
<p>Functions for creating and controlling engine native extension libraries.</p></p>
<h1><a name='//apple_ref/cpp/Macro/DM_DECLARE_EXTENSION' class='dashAnchor'></a><a class='entry' name='DM_DECLARE_EXTENSION'>DM_DECLARE_EXTENSION</a></h1><div class='brief'><p>declare a new extension</p></div><p><p>Declare and register new extension to the engine.
This macro is used to declare the extension callback functions used by the engine to communicate with the extension.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>symbol<p><span class="type">symbol</span> external extension symbol description (no quotes).</p></p><p class='param'>name<p><span class="type">const char*</span> extension name. Human readable.</p></p><p class='param'>appinit<p><span class="type">function(dmExtension::AppParams* app_params)</span> app-init function. May be null.</p>
<dl>
<dt><code>app_params</code></dt>
<dd><span class="type">dmExtension::AppParams*</span> Pointer to an <code>AppParams</code> structure.</dd>
</dl></p><p class='param'>appfinal<p><span class="type">function(dmExtension::AppParams* app_params)</span> app-final function. May be null.</p>
<dl>
<dt><code>app_params</code></dt>
<dd><span class="type">dmExtension::AppParams*</span> Pointer to an <code>AppParams</code> structure.</dd>
</dl></p><p class='param'>init<p><span class="type">function(dmExtension::Params* params)</span> init function. May not be null.</p>
<dl>
<dt><code>params</code></dt>
<dd><span class="type">dmExtension::Params*</span> Pointer to a <code>Params</code> structure</dd>
</dl></p><p class='param'>update<p><span class="type">function(dmExtension::Params* params)</span> update function. May be null.</p>
<dl>
<dt><code>params</code></dt>
<dd><span class="type">dmExtension::Params*</span> Pointer to a <code>Params</code> structure</dd>
</dl></p><p class='param'>on_event<p><span class="type">function(dmExtension::Params* params, const dmExtension::Event* event)</span> event callback function. May be null.</p>
<dl>
<dt><code>params</code></dt>
<dd><span class="type">dmExtension::Params*</span> Pointer to a <code>Params</code> structure</dd>
<dt><code>event</code></dt>
<dd><span class="type">dmExtension::Event*</span> const Pointer to an <code>Event</code> structure</dd>
</dl></p><p class='param'>final<p><span class="type">function(dmExtension::Params* params)</span> function. May not be null.</p>
<dl>
<dt><code>params</code></dt>
<dd><span class="type">dmExtension::Params*</span> Pointer to an <code>Params</code> structure.</dd>
</dl></p></div><h3>EXAMPLES</h3><div class='examples'><p><p>Register a new extension:</p>
<div class="codehilite"><pre><span></span><span class="n">DM_DECLARE_EXTENSION</span><span class="p">(</span><span class="n">MyExt</span><span class="p">,</span> <span class="s">&quot;MyExt&quot;</span><span class="p">,</span> <span class="n">AppInitializeMyExt</span><span class="p">,</span> <span class="n">AppFinalizeMyExt</span><span class="p">,</span> <span class="n">InitializeMyExt</span><span class="p">,</span> <span class="n">UpdateMyExt</span><span class="p">,</span> <span class="n">OnEventMyExt</span><span class="p">,</span> <span class="n">FinalizeMyExt</span><span class="p">);</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Macro/DM_PLATFORM_ANDROID' class='dashAnchor'></a><a class='entry' name='DM_PLATFORM_ANDROID'>DM_PLATFORM_ANDROID</a></h1><div class='brief'><p>Set if the platform is Android <span class="icon-android"></span></p></div><p><p>Set if the platform is Android <span class="icon-android"></span></p></p><hr/><h1><a name='//apple_ref/cpp/Macro/DM_PLATFORM_HTML5' class='dashAnchor'></a><a class='entry' name='DM_PLATFORM_HTML5'>DM_PLATFORM_HTML5</a></h1><div class='brief'><p>Set if the platform is Html5 <span class="icon-html5"></span></p></div><p><p>Set if the platform is Html5 <span class="icon-html5"></span></p></p><hr/><h1><a name='//apple_ref/cpp/Macro/DM_PLATFORM_IOS' class='dashAnchor'></a><a class='entry' name='DM_PLATFORM_IOS'>DM_PLATFORM_IOS</a></h1><div class='brief'><p>Set if the platform is iPhoneOS <span class="icon-ios"></span></p></div><p><p>Set if the platform is iPhoneOS <span class="icon-ios"></span></p></p><hr/><h1><a name='//apple_ref/cpp/Macro/DM_PLATFORM_LINUX' class='dashAnchor'></a><a class='entry' name='DM_PLATFORM_LINUX'>DM_PLATFORM_LINUX</a></h1><div class='brief'><p>Set if the platform is Linux <span class="icon-linux"></span></p></div><p><p>Set if the platform is Linux <span class="icon-linux"></span></p></p><hr/><h1><a name='//apple_ref/cpp/Macro/DM_PLATFORM_OSX' class='dashAnchor'></a><a class='entry' name='DM_PLATFORM_OSX'>DM_PLATFORM_OSX</a></h1><div class='brief'><p>Set if the platform is OSX <span class="icon-macos"></span></p></div><p><p>Set if the platform is OSX <span class="icon-macos"></span></p></p><hr/><h1><a name='//apple_ref/cpp/Macro/DM_PLATFORM_WINDOWS' class='dashAnchor'></a><a class='entry' name='DM_PLATFORM_WINDOWS'>DM_PLATFORM_WINDOWS</a></h1><div class='brief'><p>Set if the platform is Windows <span class="icon-windows"></span> (on both x86 and x86_64)</p></div><p><p>Set if the platform is Windows <span class="icon-windows"></span> (on both x86 and x86_64)</p></p><hr/><h1><a name='//apple_ref/cpp/Type/OnActivityResult' class='dashAnchor'></a><a class='entry' name='OnActivityResult'>OnActivityResult</a></h1><div class='brief'><p>OnActivityResult callback typedef</p></div><p><p>Activity result callback function type. Monitors events from the main activity.
Used with RegisterOnActivityResultListener() and UnregisterOnActivityResultListener()</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>env<p><span class="type">void*</span></p></p><p class='param'>activity<p><span class="type">void*</span></p></p><p class='param'>request_code<p><span class="type">int32_t</span></p></p><p class='param'>result_code<p><span class="type">int32_t</span></p></p><p class='param'>result<p><span class="type">void*</span></p></p></div><hr/><h1><a name='//apple_ref/cpp/Function/RegisterAndroidOnActivityResultListener' class='dashAnchor'></a><a class='entry' name='RegisterAndroidOnActivityResultListener'>RegisterAndroidOnActivityResultListener()</a></h1><div class='brief'><p>register Android activity result callback</p></div><p><p>Registers an activity result callback. Multiple listeners are allowed.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>[type:dmExtension::OnActivityResult]<p>listener</p></p></div><hr/><h1><a name='//apple_ref/cpp/Function/RegisterCallback' class='dashAnchor'></a><a class='entry' name='RegisterCallback'>RegisterCallback()</a></h1><div class='brief'><p>Register extra extension callbacks.</p></div><p><p>Register extra extension callbacks.</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>callback_type<p><span class="type">CallbackType</span> Callback type enum</p></p><p class='param'>func<p><span class="type">extension_callback_t</span> Function to register as callback</p></p></div><h3>RETURN</h3><div class='return'><p>[type:bool] - <p>Returns true if successfully registered the function, false otherwise.</p></p></div><hr/><h1><a name='//apple_ref/cpp/Function/RegisteriOSUIApplicationDelegate' class='dashAnchor'></a><a class='entry' name='RegisteriOSUIApplicationDelegate'>RegisteriOSUIApplicationDelegate()</a></h1><div class='brief'><p>Register application delegate</p></div><p><p>Register an iOS application delegate to the engine. Multiple delegates are supported (Max 32)</p>
<p>This function is only available on iOS. <span class="icon-ios"></span></p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>delegate<p><span class="type">id&lt;UIApplicationDelegate&gt;</span> An UIApplicationDelegate, see: https://developer.apple.com/documentation/uikit/uiapplicationdelegate?language=objc</p></p></div><h3>EXAMPLES</h3><div class='examples'><p><p>```objective-c</p>
<p>// myextension_ios.mm</p>
<p>id<UIApplicationDelegate> g_MyApplicationDelegate;</p></p></div><hr/><h1><a name='//apple_ref/cpp/Function/UnregisterAndroidOnActivityResultListener' class='dashAnchor'></a><a class='entry' name='UnregisterAndroidOnActivityResultListener'>UnregisterAndroidOnActivityResultListener()</a></h1><div class='brief'><p>unregister Android activity result callback</p></div><p><p>Unregisters an activity result callback</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>[type:dmExtension::OnActivityResult]<p>listener</p></p></div><hr/><h1><a name='//apple_ref/cpp/Function/UnregisteriOSUIApplicationDelegate' class='dashAnchor'></a><a class='entry' name='UnregisteriOSUIApplicationDelegate'>UnregisteriOSUIApplicationDelegate()</a></h1><div class='brief'><p>Unregister an application delegate</p></div><p><p>Deregister a previously registered iOS application delegate</p>
<p>This function is only available on iOS. <span class="icon-ios"></span></p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>delegate<p>an id<UIApplicationDelegate></p></p></div><h3>EXAMPLES</h3><div class='examples'><p><div class="codehilite"><pre><span></span><span class="c1">// myextension_ios.mm</span>
<span class="kt">void</span> <span class="nf">ExtensionAppFinalizeiOS</span><span class="p">(</span><span class="n">dmExtension</span><span class="o">::</span><span class="n">AppParams</span><span class="o">*</span> <span class="n">params</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">dmExtension</span><span class="o">::</span><span class="n">UnregisteriOSUIApplicationDelegate</span><span class="p">(</span><span class="n">g_MyApplicationDelegate</span><span class="p">);</span>
    <span class="p">[</span><span class="n">g_MyApplicationDelegate</span> <span class="n">release</span><span class="p">];</span>
    <span class="n">g_MyApplicationDelegate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></p></div><hr/><h1><a name='//apple_ref/cpp/Function/dmExtension::AppParams' class='dashAnchor'></a><a class='entry' name='dmExtension::AppParams'>dmExtension::AppParams()</a></h1><div class='brief'><p>application level callback data</p></div><p><p>Extension application entry callback data.
This is the data structure passed as parameter by extension Application entry callbacks (AppInit and AppFinalize) functions</p></p><h3>MEMBERS</h3><div class='params'><p class='param'>m_ConfigFile - <p><span class="type">dmConfigFile::HConfig</span></p></p></div><hr/><h1><a name='//apple_ref/cpp/Enum/dmExtension::CallbackType' class='dashAnchor'></a><a class='entry' name='dmExtension::CallbackType'>dmExtension::CallbackType</a></h1><div class='brief'><p>extra callback enumeration</p></div><p><p>Extra callback enumeration for RegisterCallback function.</p></p><h3>MEMBERS</h3><div class='params'><p class='param'>dmExtension::CALLBACK_PRE_RENDER - </p><p class='param'>dmExtension::CALLBACK_POST_RENDER - </p></div><hr/><h1><a name='//apple_ref/cpp/Function/dmExtension::Event' class='dashAnchor'></a><a class='entry' name='dmExtension::Event'>dmExtension::Event()</a></h1><div class='brief'><p>event callback data</p></div><p><p>Extension event callback data.
This is the data structure passed as parameter by extension event callbacks (OnEvent)</p></p><h3>MEMBERS</h3><div class='params'><p class='param'>m_Event - <p><span class="type">dmExtension::EventID</span></p></p></div><hr/><h1><a name='//apple_ref/cpp/Enum/dmExtension::EventID' class='dashAnchor'></a><a class='entry' name='dmExtension::EventID'>dmExtension::EventID</a></h1><div class='brief'><p>event id enumeration</p></div><p><p>Event id enumeration.</p></p><h3>MEMBERS</h3><div class='params'><p class='param'>dmExtension::EVENT_ID_ACTIVATEAPP - </p><p class='param'>dmExtension::EVENT_ID_DEACTIVATEAPP - </p></div><hr/><h1><a name='//apple_ref/cpp/Function/dmExtension::Params' class='dashAnchor'></a><a class='entry' name='dmExtension::Params'>dmExtension::Params()</a></h1><div class='brief'><p>extension level callback data</p></div><p><p>Extension callback data.
This is the data structure passed as parameter by extension callbacks (Init, Finalize, Update, OnEvent)</p></p><h3>MEMBERS</h3><div class='params'><p class='param'>m_ConfigFile - <p><span class="type">dmConfigFile::HConfig</span></p></p><p class='param'>m_L - <p><span class="type">lua_State*</span></p></p></div><hr/><h1><a name='//apple_ref/cpp/Enum/dmExtension::Result' class='dashAnchor'></a><a class='entry' name='dmExtension::Result'>dmExtension::Result</a></h1><div class='brief'><p>result enumeration</p></div><p><p>Result enumeration.</p></p><h3>MEMBERS</h3><div class='params'><p class='param'>dmExtension::RESULT_OK - </p><p class='param'>dmExtension::RESULT_INIT_ERROR - </p></div><hr/><h1><a name='//apple_ref/cpp/Type/extension_callback_t' class='dashAnchor'></a><a class='entry' name='extension_callback_t'>extension_callback_t</a></h1><div class='brief'><p>Extra extension callback typedef</p></div><p><p>Callback typedef for functions passed to RegisterCallback().</p></p><h3>PARAMETERS</h3><div class='params'><p class='param'>params<p><span class="type">Params</span></p></p></div><h3>RETURN</h3><div class='return'><p>[type:Result] - </p></div><hr/></body></html>